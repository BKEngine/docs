<!DOCTYPE html xmlns:wb="http://open.weibo.com/wb">
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" xmlns:wb="http://open.weibo.com/wb"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" xmlns:wb="http://open.weibo.com/wb"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="renderer" content="webkit">
  <meta name="keywords" content="BKEngine 游戏引擎 教程 文档 AVG Galgame 吉里吉里 文字游戏 文字冒险游戏 文字游戏制作 独立游戏 Galgame游戏引擎 AVG游戏引擎 Galgame制作 AVG游戏制作" />
  <meta name="description" content="None" />
  <meta name="author" content="面包工坊" />
  <meta property="wb:webmaster" content="2cd5f93eb4f66230" />
  <meta property="og:type" content="webpage" />
  <meta property="og:url" content="http://docs.bakery.moe/old/animation/" />
  <meta property="og:title" content="动画 - BKEngine Documentary" />
  <meta property="og:description" content="BKEngine游戏引擎文档：动画" />
  <meta property="og:image" content="/logo/1.png" />
  <meta property="og:image" content="/logo/2.png" />
  <!--<meta name="weibo:webpage:create_at" content="网页的创建时间" />-->
  <meta name="weibo:webpage:update_at" content="2015-12-17 03:32:55.419000" />
  
  <title>动画 - BKEngine Documentary</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.useso.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../themefix.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "动画";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script async src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> BKEngine Documentary</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
        <wb:follow-button uid="5186767799" type="red_2" height="24" style="margin-top:0.809em;;display:inline-block"></wb:follow-button>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">首页</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../faq/">常见问题（必看！）</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>旧教程</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../quickstart/">快速入门</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../image/">图像</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sound/">声音</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../grammar/">语法进阶</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">动画</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#_1">动画</a></li>
                
                    <li><a class="toctree-l4" href="#animate">animate</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>新教程（施工中）</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../new/quickstart/">快速入门</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>脚本命令手册</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../bkscr/sprite/">精灵类</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../bkscr/sound/">音频类</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Parser 系统</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../parser/">基本语法</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../parser/engine/">特有函数</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">BKEngine Documentary</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>旧教程 &raquo;</li>
        
      
    
    <li>动画</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
    <li class='weiboShareNav'>
      <wb:share-button appkey="1698918097" addition="simple" type="button" ralateUid="5186767799" id="weiboShare"></wb:share-button>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">动画<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<hr />
<p>这一次给各位介绍的是BKE的动画类，它包含了 <code>animate</code> 、 <code>action</code> 与 <code>trans</code> 。三者都是在BKE中制作动画时必不可缺的组成部分。 虽然实际说来三者其实是不同的三个类，不过考虑到功能划分，我们这一次就先对 <code>animate</code> 类先进行说明。</p>
<h2 id="animate">animate<a class="headerlink" href="#animate" title="Permanent link">&para;</a></h2>
<p>顾名思义，<code>animate</code> 命令常被用于创建逐帧动画时使用，您可以利用此命令来创建一个循环播放的动画。</p>
<p>其命令格式如下：</p>
<p><strong>animate</strong> <em>*mode</em><br />
    动画系命令关键字。</p>
<p><em>mode</em><br />
    接下来执行动画命令的类型。  </p>
<p><code>animate</code> 命令有6种不同的模式（mode关键字），它们分别是：</p>
<pre><code>horizontal vertical multfiles start cell stop
</code></pre>
<p>对于不同的 <code>mode</code> ， <code>animate</code> 命令有不同的参数，这里就向大家顺序介绍一下：</p>
<p><strong>animate</strong> <em><em>mode=&rdquo;horizontal&rdquo; </em>index <em>file </em>frame interval loop</em><br />
    动画系命令，模式为剪裁方式（动画帧水平排列）。</p>
<p><em>index</em><br />
    创建的动画的编号（和精灵共用一个编号集合）。<br />
<em>file</em><br />
    读取的文件。<br />
<em>frame</em><br />
    动画的帧数。<br />
<em>interval</em><br />
    每帧的间隔，默认为33（30fps）。<br />
<em>loop</em><br />
    动画循环模式，值有 &ldquo;none&rdquo;（不循环），&rdquo;forword&rdquo;（单向循环），&rdquo;bouncing&rdquo;（布朗斯循环）。  </p>
<hr />
<p><strong>animate</strong> <em><em>mode=&rdquo;vertical&rdquo; </em>index <em>file </em>frame interval loop</em><br />
    动画系命令，模式为垂直模式（动画帧垂直排列）。</p>
<p><em>index</em><br />
    创建的动画的编号（和精灵共用一个编号集合）。<br />
<em>file</em><br />
    读取的文件。<br />
<em>frame</em><br />
    动画的帧数。<br />
<em>interval</em><br />
    每帧的间隔，默认为33（30fps）。<br />
<em>loop</em><br />
    动画循环模式，值有 &ldquo;none&rdquo;（不循环），&rdquo;forword&rdquo;（单向循环），&rdquo;bouncing&rdquo;（布朗斯循环）。  </p>
<script language="JavaScript">var number=1; function LMYC() { var lbmc; for (i=1;i<=number;i++) { lbmc = eval('LM' + i); lbmc.style.display = 'none'; } } function ShowFLT(i) { lbmc = eval('LM' + i); if (lbmc.style.display == 'none') { LMYC(); lbmc.style.display = ''; } else { lbmc.style.display = 'none'; } }</script>

<table width="600" border="0" cellspacing="2" cellpadding="0">

<tbody>

<tr>

<td width="56" height="40" align="right" class="STYLE1">+</td>

<td width="544" height="40" class="dotline">[不同循环模式的说明](javascript:void(null))</td>

</tr>

<tr id="LM1" style="DISPLAY: none">

<td height="30" align="right" bgcolor="#f5f9ed"><span class="STYLE2">_</span></td>

<td height="30" bgcolor="#f5f9ed">在假定一个动画文件有4帧的情况下：  
  不循环：顾名思义，动画将不会循环，仅仅只是按顺序1-2-3将动画播放一次后停止。  
  单向循环：动画会按照1-2-3-4｜1-2-3-4｜1-2-3-4这样的顺序来循环播放，在播放完最后一帧后重新跳转到第一帧。  
  布朗斯循环：在没有delay的情况下，动画会按照1-2-3-4-3-2-1-2-3-4的顺序循环；如果在有delay的情况下，动画则会按照1-2-3-4-3-2-1｜2-3-4-3-2-1｜2-3-4-3-2-1这样的顺序循环。  
</td>

</tr>

</tbody>

</table>

<p>在这里我们准备了两张不同的素材，以分别对应两种不同的剪裁模式：</p>
<p><center><img alt="horizontal" src="../images/rakuda-1.png" /></center></p>
<p><center><img alt="vertical" src="../images/rakuda-3.png" /></center></p>
<p>文件一对应了 <code>horizontal</code> 模式，而文件二对应的则是 <code>vertical</code> 模式。可以直观的看出前者是横向剪裁，后者则是竖向剪裁。</p>
<p>请您先将这两个文件保存下来，在之后的示例中我们将会使用到它。</p>
<p>接下来我们继续介绍剩余的模式：</p>
<p><strong>animate</strong> <em><em>mode=&rdquo;multifiles&rdquo; </em>index *file interval loop delay</em><br />
    从多个文件创建一个动画。</p>
<p><em>index</em><br />
    创建的动画的编号（和精灵共用一个编号集合）。<br />
<em>file</em><br />
    将要添加的文件列表。<br />
<em>interval</em><br />
    每帧的间隔，默认为33（30fps）。<br />
<em>loop</em><br />
    动画是否循环，默认为 false 。<br />
<em>delay</em><br />
    动画每次循环之间的间隔 。  </p>
<hr />
<p><strong>animate</strong> <em><em>mode=&rdquo;start&rdquo; </em>index</em><br />
    开始一个动画。</p>
<p><em>index</em><br />
    欲开始的动画的编号（和精灵共用一个编号集合）。  </p>
<p><strong>animate</strong> <em><em>mode=&rdquo;stop&rdquo; </em>index</em><br />
    停止一个动画。</p>
<p><em>index</em><br />
    欲停止的动画的编号（和精灵共用一个编号集合）。  </p>
<hr />
<p><strong>animate</strong> <em><em>mode=&rdquo;cell&rdquo; </em>index *frame</em><br />
    切换动画到某一帧（会停止动画）。</p>
<p><em>index</em><br />
    欲更改的动画的编号（和精灵共用一个编号集合）。<br />
<em>file</em><br />
    欲更改动画到哪一帧。  </p>
<pre><code>请注意， `start` 仅仅只能作用于单个精灵，不能传入数组作为参数。
</code></pre>
<p>在介绍完 <code>animate</code> 类所有的 <code>mode</code> 之后，让我们来练练手吧！</p>
<p>首先请将下面的图片保存到您的硬盘上：</p>
<p><center><img alt="ch1" src="../images/ch-1.png" />  <img alt="ch2" src="../images/ch-2.png" />  <img alt="ch3" src="../images/ch-3.png" /></center></p>
<p>接着，您可以直接复制下面的代码，保存编译之后运行以查看它的作用，不过我还是推荐您自己先写一遍 :)</p>
<pre><code>*main
@layer index=10 width=800 height=600 color=0xFFFFFF opacity=255
@addto index=10 target=basic_layer
@wait time=1000 canskip=false

@animate mode="horizontal" index=2 file="rakuda-1" frame=4 interval=180 loop="forward"
@addto index=2 target=10 zorder=10 pos=[250,280]
@animate mode="start" index=2
@wait time=1000 canskip=false

@animate mode="vertical" index=3 file="rakuda-3" frame=4 interval=360 loop="forward"
@addto index=3 target=10 zorder=10 pos=[350,280]
@animate mode="start" index=3
@wait time=1000 canskip=false

@animate mode="multifiles" index=4 file=["ch-1","ch-2","ch-3"] interval=360 loop="true" delay=500
@addto index=4 target=10 zorder=10 pos=[400,280]
@animate mode="start" index=4
@wait time=2000 canskip=false

@animate mode="stop" index=2
@animate mode="cell" index=3 frame=2
</code></pre>
<p>首先，我们使用两张连续的图片创建了两个动画，分别对应的是横向剪裁模式与竖向剪裁模式。在每一次创建结束后，我们都使用了 <code>start</code> 模式来开始对应的动画，如果我们不使用 <code>start</code> 命令，对应的动画则不会开始播放，请注意。</p>
<p>接下来我们使用了 <code>muiltfiles</code> 模式，以三张独立的图片创建了一个动画。这里需要说明的是，在 <code>muiltfiles</code> 模式中， <code>interval</code> 这个参数负责控制帧与帧之间的间隔时间，而 <code>delay</code> 参数则用于控制每次循环与循环之间的间隔时间。您可以自行修改 <code>delay</code> 的大小来体会。</p>
<p>在最后两行命令中，我们停止了编号为2的动画文件的播放，使编号为3的动画切换到了第2帧（注意，这样做会停止动画的播放）。</p>
<p>以上就是 <code>animate</code> 类的所有命令了，怎么样，是不是觉得很简单呢？</p>
<p><code>animate</code> 类的用处很广泛，您可以使用动画文件来创建一个动态的按钮，或者是在画面上循环一段动画，加强您游戏的演出效果等，甚至您还可以使用它来制作RPG类游戏的NPC！</p>
              
            </div>
          </div>
          <div class='weiboShareFooter'>
            <wb:share-button appkey="1698918097" addition="simple" type="button" ralateUid="5186767799" id="weiboShare"></wb:share-button>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../new/quickstart/" class="btn btn-neutral float-right" title="快速入门"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../grammar/" class="btn btn-neutral" title="语法进阶"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />本文档采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../grammar/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../new/quickstart/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
